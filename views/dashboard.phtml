<?php if (Session::isConnected() && $_SESSION['auth']['role']) :; ?>


    <div class="flex-container-admin">
        <div class="admin-border">
            <div class="big-title-admin">
                <h2>Articles</h2>
            </div>
            <h3 class="title-admin">Total : <?= $countPosts ?> articles</p>
            </h3>
            <table>
                <thead>
                    <tr class="title-admin">
                        <th>Id</th>
                        <th>Id utilisateur</th>
                        <th>Titre</th>
                        <th>Contenu</th>
                        <th>Date de création</th>
                    </tr>
                </thead>
                <tbody>
                    <?php foreach ($posts as $post) : ?>
                        <tr>
                            <td>
                                <?= htmlspecialchars($post['id']); ?>
                            </td>
                            <td>
                                <?= htmlspecialchars($post['user_id']); ?>
                            </td>
                            <td>
                                <?= htmlspecialchars($post['title']); ?>
                            </td>
                            <td>
                                <?= htmlspecialchars($post['content']); ?>
                            </td>
                            <td>
                                <?= htmlspecialchars($post['created_at']); ?>
                            </td>
                        </tr>
                    <?php endforeach; ?>
                </tbody>
            </table>

        </div>

        <div class="admin-border">
            <div class="big-title-admin">
                <h2>Contact</h2>
            </div>
            <table>
                <thead>
                    <tr class="title-admin">
                        <th>Id</th>
                        <th>Nom</th>
                        <th>Mail</th>
                        <th>Téléphone</th>
                        <th>Sujet</th>
                        <th>Contenu</th>
                        <th>Date de création</th>
                    </tr>
                </thead>

                <h3 class="title-admin">Total : <?= $counts ?> messages</h3>
                <tbody>
                    <?php foreach ($contacts as $contact) : ?>
                        <tr>
                            <td>
                                <?= htmlspecialchars($contact['id']); ?>
                            </td>
                            <td>
                                <?= htmlspecialchars($contact['name']); ?>
                            </td>
                            <td>
                                <?= htmlspecialchars($contact['mail']); ?>
                            </td>
                            <td>
                                <?= htmlspecialchars($contact['phone']); ?>
                            </td>
                            <td>
                                <?= htmlspecialchars($contact['subject']); ?>
                            </td>
                            <td>
                                <?= htmlspecialchars($contact['content']); ?>
                            </td>
                            <td>
                                <?= htmlspecialchars($contact['created_at']); ?>
                            </td>
                        </tr>

                    <?php endforeach; ?>

                    <!-- Nous affichons le reste de nos messages -->
                    <tr id="slide">
                        <!-- <div id="slide"></div> -->
                    </tr>

                </tbody>

            </table>


            <button id="next" class="">afficher plus de messages</button>
        </div>

        <div class="admin-border">
            <div class="big-title-admin">
                <h2>Utilisateurs</h2>
            </div>

            <table>
                <thead>
                    <tr class="title-admin">
                        <th>Id</th>
                        <th>Prénom</th>
                        <th>Nom</th>
                        <th>Email</th>
                        <th>Rôle</th>
                        <th>Suppression</th>
                    </tr>
                </thead>

                <tbody>
                    <?php foreach ($users as $user) : ?>
                        <tr>
                            <td>
                                <?= htmlspecialchars($user['id']); ?>
                            </td>
                            <td>
                                <?= htmlspecialchars($user['firstname']); ?>
                            </td>
                            <td>
                                <?= htmlspecialchars($user['lastname']); ?>
                            </td>
                            <td>
                                <?= htmlspecialchars($user['mail']); ?>
                            </td>
                            <td>
                                <?= htmlspecialchars($user['isAdmin']); ?>
                            </td>
                            <td>
                                <a href="delete-user.php?id=<?= intval($user['id']); ?>" class="btn-delete">Supprimer</a>
                            </td>
                        </tr>
                    <?php endforeach; ?>
                </tbody>
            </table>
        </div>

        <div class="admin-border">
            <div class="big-title-admin">
                <h2>Animaux</h2>
            </div>
            <h3 class="title-admin">Total : <?= $countAnimals ?> animaux</h3>
        </div>

        <div class="admin-border">
            <div class="big-title-admin">
                <h2>Espèces & Races</h2>
            </div>

            <table>
                <thead>
                    <tr class="title-admin">
                        <th>Total d'espèces :</th>
                        <th>Total de races :</th>
                    </tr>
                </thead>
                <tr>
                    <td><?= $countSpecies ?></td>
                    <td><?= $countRaces ?></td>
                </tr>
            </table>

            <table>
                <thead>
                    <tr class="title-admin">
<<<<<<< HEAD
                        <th>Différentes espèces</th>
                        <th>Suppression</th>
=======
                        <th>Suppression d'une espèce</th>
>>>>>>> d8d9d7e33296939e4549878f1b8063da8684c804
                    </tr>
                </thead>

                <tbody>
                    <?php foreach ($species as $specie) : ?>
                        <tr>
                            <td>
                                <?= htmlspecialchars($specie['name']); ?>
                            </td>
                            <td>
                                <a href="delete-specie.php?id=<?= intval($specie['id']); ?>" class="btn-delete">Supprimer</a>
                            </td>
                        </tr>
                    <?php endforeach; ?>
                </tbody>
            </table>

            <table>
                <thead>
                    <tr>
<<<<<<< HEAD
                        <th class="title-admin">Différentes races</th>
                        <th class="title-admin">Suppression</th>
=======
                        <th class="title-admin">Suppression d'une race</th>
>>>>>>> d8d9d7e33296939e4549878f1b8063da8684c804
                    </tr>
                </thead>

                <tbody>
                    <?php foreach ($races as $element) : ?>
                        <tr>
                            <td>
                                <?= htmlspecialchars($element['race']); ?>
                            </td>
                            <td>
                                <a href="delete-race.php?id=<?= intval($element['id']); ?>" class="btn-delete">Supprimer</a>
                            </td>
                        </tr>
                    <?php endforeach; ?>
                </tbody>
            </table>
        </div>

        <div class="admin-border">
            <div class="big-title-admin">
                <h2>Ajout d'une espèce</h2>
            </div>
            <?php foreach ($species as $element) : ?>
                <div>
                    <?= htmlspecialchars($element['name']); ?>
                </div>
            <?php endforeach ?>

            <form method="POST" action="dashboard.php">
                <label for="name">
                    <span>Ajouter une espèce</span>
                    <input type="text" name="name" id="name" value="" />
                </label>
                <input type="submit" value="ajouter" name="specieData">
            </form>
        </div>

        <div class="admin-border">
            <div class="big-title-admin">
                <h2>Ajout d'une race</h2>
            </div>
            <?php foreach ($races as $element) : ?>
                <div>
                    <?= htmlspecialchars($element['race']); ?>
                </div>
            <?php endforeach ?>

            <form action="dashboard.php" method="post">
                <label for="race">
                    <span>Ajouter une race</span>
                    <input type="text" name="race" id="race" />
                </label>
                <input type="submit" value="ajouter" name="raceData">
            </form>
        </div>









    </div>
<?php elseif (Session::isConnected() && !$_SESSION['auth']['role']) : ?>
    <?= $_SESSION['error'] = 'Restricted'; ?>
<?php endif; ?>